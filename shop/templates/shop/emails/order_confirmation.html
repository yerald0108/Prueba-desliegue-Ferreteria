{% extends 'shop/emails/base_email.html' %}

{% block content %}
<h2>Â¡Gracias por tu compra, {{ user.first_name }}! ğŸ‰</h2>

<p>Hemos recibido tu orden exitosamente y ya estamos preparÃ¡ndola.</p>

<div class="order-details">
    <h3 style="margin-top: 0; color: #004e89;">ğŸ“‹ Detalles de tu Orden</h3>
    <table>
        <tr>
            <td>NÃºmero de Orden:</td>
            <td><strong>{{ order.order_number }}</strong></td>
        </tr>
        <tr>
            <td>Fecha de Orden:</td>
            <td>{{ order.created_at|date:"d/m/Y H:i" }}</td>
        </tr>
        <tr>
            <td>Estado:</td>
            <td><strong>{{ order.get_status_display }}</strong></td>
        </tr>
        <tr>
            <td>MÃ©todo de Pago:</td>
            <td>{{ order.get_payment_method_display }}</td>
        </tr>
    </table>
</div>

<div class="order-details">
    <h3 style="margin-top: 0; color: #004e89;">ğŸ“¦ Productos</h3>
    <table>
        {% for item in items %}
        <tr>
            <td>{{ item.quantity }}x {{ item.product.name }}</td>
            <td style="text-align: right;">${{ item.subtotal }}</td>
        </tr>
        {% endfor %}
        <tr>
            <td><strong>Subtotal:</strong></td>
            <td style="text-align: right;"><strong>${{ order.subtotal }}</strong></td>
        </tr>
        <tr>
            <td><strong>EnvÃ­o:</strong></td>
            <td style="text-align: right;"><strong>${{ order.delivery_fee }}</strong></td>
        </tr>
        <tr style="border-top: 2px solid #004e89;">
            <td><strong>TOTAL:</strong></td>
            <td style="text-align: right;" class="total">${{ order.total }}</td>
        </tr>
    </table>
</div>

<div class="order-details">
    <h3 style="margin-top: 0; color: #004e89;">ğŸšš InformaciÃ³n de Entrega</h3>
    <table>
        <tr>
            <td>DirecciÃ³n:</td>
            <td>{{ order.delivery_address }}</td>
        </tr>
        <tr>
            <td>Ciudad:</td>
            <td>{{ order.delivery_city }}, {{ order.delivery_province }}</td>
        </tr>
        <tr>
            <td>Fecha de Entrega:</td>
            <td>{{ order.delivery_date|date:"d/m/Y" }}</td>
        </tr>
        <tr>
            <td>Horario:</td>
            <td>{{ order.get_delivery_time_display }}</td>
        </tr>
        <tr>
            <td>TelÃ©fono:</td>
            <td>{{ order.contact_phone }}</td>
        </tr>
    </table>
</div>

{% if order.notes %}
<div class="info-box">
    <p><strong>ğŸ“ Tus notas:</strong></p>
    <p>{{ order.notes }}</p>
</div>
{% endif %}

<div style="text-align: center;">
    <a href="{{ site_url }}/orden/{{ order.id }}/" class="button">Ver Detalles de la Orden</a>
</div>

<p><strong>Â¿QuÃ© sigue?</strong></p>
<p>Te contactaremos al nÃºmero {{ order.contact_phone }} para confirmar tu pedido y coordinar la entrega. TambiÃ©n recibirÃ¡s actualizaciones por email cuando cambie el estado de tu orden.</p>

<p>Â¡Gracias por confiar en nosotros!<br>El equipo de {{ site_name }}</p>
{% endblock %}